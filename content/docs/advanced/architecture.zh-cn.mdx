---
title: Devbox 架构
---

Sealos DevBox 是一种先进的开发环境解决方案，它利用云原生容器和 Kubernetes 技术提供统一且灵活的开发运行时。其核心特点是在保持容器化优势的同时，模拟传统虚拟机体验。

## 架构

Sealos DevBox 基于分层架构设计，包含以下关键组件：

![](./images/architecture.png)


## 控制流程

DevBox 实现了前后端解耦设计：

1. 用户通过网页界面或插件触发操作
2. Devbox 控制器接收并处理这些请求
3. 控制器将处理后的指令转换为 Kubernetes API 调用
4. Kubernetes 执行相应的容器操作

![](./images/controller_flow.png)


## 状态持久化机制

DevBox 采用智能状态保存系统，确保用户环境的一致性：


### 自动保存

- 系统在特定条件下自动保存用户环境变更
- 变更被打包为镜像层
- 新的镜像层作为提交附加到基础镜像上
- 更新后的镜像安全地存储在隔离的内部镜像仓库中

### 环境恢复

- 在后续启动时，系统从最新镜像启动
- 确保完整保留历史变更

### 优化

Container-shim 层提供自动化维护：

- 定期合并镜像层以优化存储
- 自动清理冗余数据
- 优化镜像大小和层数，实现系统最佳性能

![](./images/shim_arch.png)



